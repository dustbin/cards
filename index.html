<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<script>
	window.onload = function(){
		let canvas = document.getElementById("canvas");
		canvas.width = window.innerWidth;
		canvas.height = window.innerHeight;
		let context = canvas.getContext("2d");
		let c = new Card("Amelia", Flag.Purple|Flag.Tea|Flag.Hat|Flag.Jewelry);
		context.save();
		context.translate(50, 50);
		c.draw(context);
		context.restore();
	};
	function curvedRectanglePath(width,height,radius){
		let path = new Path2D();
		path.moveTo(radius,0);
		path.arcTo(width, 0, width, radius, radius);
		path.arcTo(width, height, width-radius, height, radius);
		path.arcTo(0, height, 0, height-radius, radius);
		path.arcTo(0, 0, radius, 0, radius);
		return path;
	}
	class Flag{
		static Purple = 0x0;
		static Green = 0x1;
		static Orange = 0x2;

		static Cake = 0x4;

		static Flower = 0x10;
		static Glasses = 0x20;
		static Hat = 0x40;

		static Jewelry = 0x100;
		static Pet = 0x200;
		static Spikes = 0x400;

		static Spots = 0x1000;
		static Stripes = 0x2000;
		static Tail = 0x4000;

		static Tea = 0x10000;
		static Teeth = 0x20000;

		static Path = curvedRectanglePath(35,35,5);

		static drawFlags(context, flags){
			context.save();
			context.translate(14, 299);
			context.lineWidth = 2;
			if(flags & Flag.Cake){
				context.strokeStyle = "orange";
				context.stroke(Flag.Path);
				context.translate(37,0);
			}
			if(flags & Flag.Flower){
				context.strokeStyle = "orange";
				context.stroke(Flag.Path);
				context.translate(37,0);
			}
			if(flags & Flag.Hat){
				context.strokeStyle = "red";
				context.stroke(Flag.Path);
				context.translate(37,0);
			}
			if(flags & Flag.Jewelry){
				context.strokeStyle = "yellow";
				context.stroke(Flag.Path);
				context.translate(37,0);
			}
			if(flags & Flag.Tea){
				context.strokeStyle = "blue";
				context.stroke(Flag.Path);
				context.translate(37,0);
			}
			context.restore();
		}
	}
	class Card{
		static OuterPath = curvedRectanglePath(250,350,10);
		static NamePath = curvedRectanglePath(230,30,7);
		static FlagsPath = curvedRectanglePath(230,45,7);
		constructor(name,flags){
			this.name = name;
			this.flags = flags;
		}
		
		draw(context){
			this.drawCard(context);
			this.drawText(context);
			Flag.drawFlags(context, this.flags);
		}
		drawCard(context){
			context.save();
			if(this.flags & Flag.Green){
				context.fillStyle = "green";
			}else if(this.flags & Flag.Orange){
				context.fillStyle = "orange";
			}else{
				context.fillStyle = "purple";
			}
			context.fill(Card.OuterPath);
			context.fillStyle = "white";
			context.translate(10, 10);
			context.fill(Card.NamePath);
			context.translate(0, 285);
			context.fill(Card.FlagsPath);
			context.restore();
		}
		drawText(context){
			context.save();
			context.fillStyle = "black";
			context.font = '24px cursive';
			if(this.textOffset == undefined){
				let t = context.measureText(this.name);
				this.textOffset = 10 + (230-t.width)/2;
			}
			context.fillText(this.name,this.textOffset,33);
			context.restore();
		}
	}
	</script>
	<style>
	body{
		margin: 0;
		width: 100%;
		height: 100%;
		overflow: hidden;
	}
	</style>
</head>
<body>
	<canvas id="canvas"></canvas>
</body>
</html>
